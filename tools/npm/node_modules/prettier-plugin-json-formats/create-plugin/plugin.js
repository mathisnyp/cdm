"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createJsonPlugin = void 0;
const json_stringify_1 = require("./printers/json-stringify");
const json_1 = require("./printers/json");
const flags_1 = require("./flags");
const parser_1 = require("./parser");
const createPrinter = new Map([
    ['json-stringify', json_stringify_1.createPrinter],
    ['json', json_1.createPrinter],
]);
function createJsonPlugin({ language, modifier, flags = flags_1.JsonFlags.Loose, parserFlags = flags_1.JsonFlags.Loose, printer = 'json-stringify', }) {
    const astFormat = language.name;
    if (!createPrinter.has(printer)) {
        throw new Error(`Unknown JSON printer: ${printer}`);
    }
    return {
        parsers: {
            [astFormat]: (0, parser_1.createParser)(astFormat, modifier, parserFlags),
        },
        printers: {
            [astFormat]: createPrinter.get(printer)(flags),
        },
        languages: [
            {
                ...language,
                parsers: [astFormat],
            },
        ],
    };
}
exports.createJsonPlugin = createJsonPlugin;
