{"version":3,"sources":["../../src/languages/bigquery.formatter.ts"],"names":["reservedFunctions","aead","aggregateAnalytic","aggregate","approximateAggregate","array","bitwise","conversion","date","datetime","debugging","federatedQuery","geography","hash","hll","interval","json","math","navigation","net","numbering","security","statisticalAggregate","string","time","timestamp","uuid","conditional","legacyAggregate","legacyBitwise","legacyCasting","legacyComparison","legacyDatetime","legacyIp","legacyJson","legacyMath","legacyRegex","legacyString","legacyTableWildcard","legacyUrl","legacyWindow","legacyMisc","other","reservedKeywords","keywords","datatypes","stringFormat","misc","reservedCommands","reservedBinaryCommands","reservedDependentClauses","BigQueryFormatter","Tokenizer","reservedLogicalOperators","fullReservedWords","stringTypes","blockStart","blockEnd","indexedPlaceholderTypes","namedPlaceholderTypes","lineCommentTypes","specialWordChars","operators","token","test","value","tokenLookAhead","level","finalToken","nextToken","length","tokens","splice","index","Formatter","Object","values","reduce","acc","arr","any"],"mappings":"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","sourcesContent":["import Formatter from '../core/Formatter';\nimport Tokenizer from '../core/Tokenizer';\nimport type { StringPatternType } from '../core/regexFactory';\nimport { Token } from '../core/token';\nimport { dedupe } from '../utils';\n\n/**\n * Priority 5 (last)\n * Full list of reserved functions\n * distinct from Keywords due to interaction with parentheses\n */\nconst reservedFunctions = {\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/aead_encryption_functions\n\taead: [\n\t\t'KEYS.NEW_KEYSET',\n\t\t'KEYS.ADD_KEY_FROM_RAW_BYTES',\n\t\t'AEAD.DECRYPT_BYTES',\n\t\t'AEAD.DECRYPT_STRING',\n\t\t'AEAD.ENCRYPT',\n\t\t'KEYS.KEYSET_CHAIN',\n\t\t'KEYS.KEYSET_FROM_JSON',\n\t\t'KEYS.KEYSET_TO_JSON',\n\t\t'KEYS.ROTATE_KEYSET',\n\t\t'KEYS.KEYSET_LENGTH',\n\t],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/aggregate_analytic_functions\n\taggregateAnalytic: [\n\t\t'ANY_VALUE',\n\t\t'ARRAY_AGG',\n\t\t'AVG',\n\t\t'CORR',\n\t\t'COUNT',\n\t\t'COUNTIF',\n\t\t'COVAR_POP',\n\t\t'COVAR_SAMP',\n\t\t'MAX',\n\t\t'MIN',\n\t\t'ST_CLUSTERDBSCAN',\n\t\t'STDDEV_POP',\n\t\t'STDDEV_SAMP',\n\t\t'STRING_AGG',\n\t\t'SUM',\n\t\t'VAR_POP',\n\t\t'VAR_SAMP',\n\t],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/aggregate_functions\n\taggregate: [\n\t\t'ANY_VALUE',\n\t\t'ARRAY_AGG',\n\t\t'ARRAY_CONCAT_AGG',\n\t\t'AVG',\n\t\t'BIT_AND',\n\t\t'BIT_OR',\n\t\t'BIT_XOR',\n\t\t'COUNT',\n\t\t'COUNTIF',\n\t\t'LOGICAL_AND',\n\t\t'LOGICAL_OR',\n\t\t'MAX',\n\t\t'MIN',\n\t\t'STRING_AGG',\n\t\t'SUM',\n\t],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/approximate_aggregate_functions\n\tapproximateAggregate: [\n\t\t'APPROX_COUNT_DISTINCT',\n\t\t'APPROX_QUANTILES',\n\t\t'APPROX_TOP_COUNT',\n\t\t'APPROX_TOP_SUM',\n\t],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/array_functions\n\tarray: [\n\t\t'ARRAY',\n\t\t'ARRAY_CONCAT',\n\t\t'ARRAY_LENGTH',\n\t\t'ARRAY_TO_STRING',\n\t\t'GENERATE_ARRAY',\n\t\t'GENERATE_DATE_ARRAY',\n\t\t'GENERATE_TIMESTAMP_ARRAY',\n\t\t'ARRAY_REVERSE',\n\t\t'OFFSET',\n\t\t'SAFE_OFFSET',\n\t\t'ORDINAL',\n\t\t'SAFE_ORDINAL',\n\t],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/bit_functions\n\tbitwise: ['BIT_COUNT'],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/conversion_functions\n\tconversion: ['CASE', 'PARSE_BIGNUMERIC', 'PARSE_NUMERIC', 'SAFE_CAST'],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/date_functions\n\tdate: [\n\t\t'CURRENT_DATE',\n\t\t'EXTRACT',\n\t\t'DATE',\n\t\t'DATE_ADD',\n\t\t'DATE_SUB',\n\t\t'DATE_DIFF',\n\t\t'DATE_TRUNC',\n\t\t'DATE_FROM_UNIX_DATE',\n\t\t'FORMAT_DATE',\n\t\t'LAST_DAY',\n\t\t'PARSE_DATE',\n\t\t'UNIX_DATE',\n\t],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/datetime_functions\n\tdatetime: [\n\t\t'CURRENT_DATETIME',\n\t\t'DATETIME',\n\t\t'EXTRACT',\n\t\t'DATETIME_ADD',\n\t\t'DATETIME_SUB',\n\t\t'DATETIME_DIFF',\n\t\t'DATETIME_TRUNC',\n\t\t'FORMAT_DATETIME',\n\t\t'LAST_DAY',\n\t\t'PARSE_DATETIME',\n\t],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/debugging_functions\n\tdebugging: ['ERROR'],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/federated_query_functions\n\tfederatedQuery: ['EXTERNAL_QUERY'],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/geography_functions\n\tgeography: [\n\t\t'S2_CELLIDFROMPOINT',\n\t\t'S2_COVERINGCELLIDS',\n\t\t'ST_ANGLE',\n\t\t'ST_AREA',\n\t\t'ST_ASBINARY',\n\t\t'ST_ASGEOJSON',\n\t\t'ST_ASTEXT',\n\t\t'ST_AZIMUTH',\n\t\t'ST_BOUNDARY',\n\t\t'ST_BOUNDINGBOX',\n\t\t'ST_BUFFER',\n\t\t'ST_BUFFERWITHTOLERANCE',\n\t\t'ST_CENTROID',\n\t\t'ST_CENTROID_AGG',\n\t\t'ST_CLOSESTPOINT',\n\t\t'ST_CLUSTERDBSCAN',\n\t\t'ST_CONTAINS',\n\t\t'ST_CONVEXHULL',\n\t\t'ST_COVEREDBY',\n\t\t'ST_COVERS',\n\t\t'ST_DIFFERENCE',\n\t\t'ST_DIMENSION',\n\t\t'ST_DISJOINT',\n\t\t'ST_DISTANCE',\n\t\t'ST_DUMP',\n\t\t'ST_DWITHIN',\n\t\t'ST_ENDPOINT',\n\t\t'ST_EQUALS',\n\t\t'ST_EXTENT',\n\t\t'ST_EXTERIORRING',\n\t\t'ST_GEOGFROM',\n\t\t'ST_GEOGFROMGEOJSON',\n\t\t'ST_GEOGFROMTEXT',\n\t\t'ST_GEOGFROMWKB',\n\t\t'ST_GEOGPOINT',\n\t\t'ST_GEOGPOINTFROMGEOHASH',\n\t\t'ST_GEOHASH',\n\t\t'ST_GEOMETRYTYPE',\n\t\t'ST_INTERIORRINGS',\n\t\t'ST_INTERSECTION',\n\t\t'ST_INTERSECTS',\n\t\t'ST_INTERSECTSBOX',\n\t\t'ST_ISCOLLECTION',\n\t\t'ST_ISEMPTY',\n\t\t'ST_LENGTH',\n\t\t'ST_MAKELINE',\n\t\t'ST_MAKEPOLYGON',\n\t\t'ST_MAKEPOLYGONORIENTED',\n\t\t'ST_MAXDISTANCE',\n\t\t'ST_NPOINTS',\n\t\t'ST_NUMGEOMETRIES',\n\t\t'ST_NUMPOINTS',\n\t\t'ST_PERIMETER',\n\t\t'ST_POINTN',\n\t\t'ST_SIMPLIFY',\n\t\t'ST_SNAPTOGRID',\n\t\t'ST_STARTPOINT',\n\t\t'ST_TOUCHES',\n\t\t'ST_UNION',\n\t\t'ST_UNION_AGG',\n\t\t'ST_WITHIN',\n\t\t'ST_X',\n\t\t'ST_Y',\n\t],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/hash_functions\n\thash: ['FARM_FINGERPRINT', 'MD5', 'SHA1', 'SHA256', 'SHA512'],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/hll_functions\n\thll: ['HLL_COUNT.INIT', 'HLL_COUNT.MERGE', 'HLL_COUNT.MERGE_PARTIAL', 'HLL_COUNT.EXTRACT'],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/interval_functions\n\tinterval: ['MAKE_INTERVAL', 'EXTRACT', 'JUSTIFY_DAYS', 'JUSTIFY_HOURS', 'JUSTIFY_INTERVAL'],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/json_functions\n\tjson: [\n\t\t'JSON_EXTRACT',\n\t\t'JSON_QUERY',\n\t\t'JSON_EXTRACT_SCALAR',\n\t\t'JSON_VALUE',\n\t\t'JSON_EXTRACT_ARRAY',\n\t\t'JSON_QUERY_ARRAY',\n\t\t'JSON_EXTRACT_STRING_ARRAY',\n\t\t'JSON_VALUE_ARRAY',\n\t\t'TO_JSON_STRING',\n\t],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/mathematical_functions\n\tmath: [\n\t\t'ABS',\n\t\t'SIGN',\n\t\t'IS_INF',\n\t\t'IS_NAN',\n\t\t'IEEE_DIVIDE',\n\t\t'RAND',\n\t\t'SQRT',\n\t\t'POW',\n\t\t'POWER',\n\t\t'EXP',\n\t\t'LN',\n\t\t'LOG',\n\t\t'LOG10',\n\t\t'GREATEST',\n\t\t'LEAST',\n\t\t'DIV',\n\t\t'SAFE_DIVIDE',\n\t\t'SAFE_MULTIPLY',\n\t\t'SAFE_NEGATE',\n\t\t'SAFE_ADD',\n\t\t'SAFE_SUBTRACT',\n\t\t'MOD',\n\t\t'ROUND',\n\t\t'TRUNC',\n\t\t'CEIL',\n\t\t'CEILING',\n\t\t'FLOOR',\n\t\t'COS',\n\t\t'COSH',\n\t\t'ACOS',\n\t\t'ACOSH',\n\t\t'SIN',\n\t\t'SINH',\n\t\t'ASIN',\n\t\t'ASINH',\n\t\t'TAN',\n\t\t'TANH',\n\t\t'ATAN',\n\t\t'ATANH',\n\t\t'ATAN2',\n\t\t'RANGE_BUCKET',\n\t],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/navigation_functions\n\tnavigation: [\n\t\t'FIRST_VALUE',\n\t\t'LAST_VALUE',\n\t\t'NTH_VALUE',\n\t\t'LEAD',\n\t\t'LAG',\n\t\t'PERCENTILE_CONT',\n\t\t'PERCENTILE_DISC',\n\t],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/net_functions\n\tnet: [\n\t\t'NET.IP_FROM_STRING',\n\t\t'NET.SAFE_IP_FROM_STRING',\n\t\t'NET.IP_TO_STRING',\n\t\t'NET.IP_NET_MASK',\n\t\t'NET.IP_TRUNC',\n\t\t'NET.IPV4_FROM_INT64',\n\t\t'NET.IPV4_TO_INT64',\n\t\t'NET.HOST',\n\t\t'NET.PUBLIC_SUFFIX',\n\t\t'NET.REG_DOMAIN',\n\t],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/numbering_functions\n\tnumbering: ['RANK', 'DENSE_RANK', 'PERCENT_RANK', 'CUME_DIST', 'NTILE', 'ROW_NUMBER'],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/security_functions\n\tsecurity: ['SESSION_USER'],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/statistical_aggregate_functions\n\tstatisticalAggregate: [\n\t\t'CORR',\n\t\t'COVAR_POP',\n\t\t'COVAR_SAMP',\n\t\t'STDDEV_POP',\n\t\t'STDDEV_SAMP',\n\t\t'STDDEV',\n\t\t'VAR_POP',\n\t\t'VAR_SAMP',\n\t\t'VARIANCE',\n\t],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/string_functions\n\tstring: [\n\t\t'ASCII',\n\t\t'BYTE_LENGTH',\n\t\t'CHAR_LENGTH',\n\t\t'CHARACTER_LENGTH',\n\t\t'CHR',\n\t\t'CODE_POINTS_TO_BYTES',\n\t\t'CODE_POINTS_TO_STRING',\n\t\t'CONCAT',\n\t\t'CONTAINS_SUBSTR',\n\t\t'ENDS_WITH',\n\t\t'FORMAT',\n\t\t'FROM_BASE32',\n\t\t'FROM_BASE64',\n\t\t'FROM_HEX',\n\t\t'INITCAP',\n\t\t'INSTR',\n\t\t'LEFT',\n\t\t'LENGTH',\n\t\t'LPAD',\n\t\t'LOWER',\n\t\t'LTRIM',\n\t\t'NORMALIZE',\n\t\t'NORMALIZE_AND_CASEFOLD',\n\t\t'OCTET_LENGTH',\n\t\t'REGEXP_CONTAINS',\n\t\t'REGEXP_EXTRACT',\n\t\t'REGEXP_EXTRACT_ALL',\n\t\t'REGEXP_INSTR',\n\t\t'REGEXP_REPLACE',\n\t\t'REGEXP_SUBSTR',\n\t\t'REPLACE',\n\t\t'REPEAT',\n\t\t'REVERSE',\n\t\t'RIGHT',\n\t\t'RPAD',\n\t\t'RTRIM',\n\t\t'SAFE_CONVERT_BYTES_TO_STRING',\n\t\t'SOUNDEX',\n\t\t'SPLIT',\n\t\t'STARTS_WITH',\n\t\t'STRPOS',\n\t\t'SUBSTR',\n\t\t'SUBSTRING',\n\t\t'TO_BASE32',\n\t\t'TO_BASE64',\n\t\t'TO_CODE_POINTS',\n\t\t'TO_HEX',\n\t\t'TRANSLATE',\n\t\t'TRIM',\n\t\t'UNICODE',\n\t\t'UPPER',\n\t],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/time_functions\n\ttime: [\n\t\t'CURRENT_TIME',\n\t\t'TIME',\n\t\t'EXTRACT',\n\t\t'TIME_ADD',\n\t\t'TIME_SUB',\n\t\t'TIME_DIFF',\n\t\t'TIME_TRUNC',\n\t\t'FORMAT_TIME',\n\t\t'PARSE_TIME',\n\t],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/timestamp_functions\n\ttimestamp: [\n\t\t'CURRENT_TIMESTAMP',\n\t\t'EXTRACT',\n\t\t'STRING',\n\t\t'TIMESTAMP',\n\t\t'TIMESTAMP_ADD',\n\t\t'TIMESTAMP_SUB',\n\t\t'TIMESTAMP_DIFF',\n\t\t'TIMESTAMP_TRUNC',\n\t\t'FORMAT_TIMESTAMP',\n\t\t'PARSE_TIMESTAMP',\n\t\t'TIMESTAMP_SECONDS',\n\t\t'TIMESTAMP_MILLIS',\n\t\t'TIMESTAMP_MICROS',\n\t\t'UNIX_SECONDS',\n\t\t'UNIX_MILLIS',\n\t\t'UNIX_MICROS',\n\t],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/uuid_functions\n\tuuid: ['GENERATE_UUID'],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/conditional_expressions\n\tconditional: ['COALESCE', 'IF', 'IFNULL', 'NULLIF'],\n\t// https://cloud.google.com/bigquery/docs/reference/legacy-sql\n\tlegacyAggregate: [\n\t\t'AVG',\n\t\t'BIT_AND',\n\t\t'BIT_OR',\n\t\t'BIT_XOR',\n\t\t'CORR',\n\t\t'COUNT',\n\t\t'COVAR_POP',\n\t\t'COVAR_SAMP',\n\t\t'EXACT_COUNT_DISTINCT',\n\t\t'FIRST',\n\t\t'GROUP_CONCAT',\n\t\t'GROUP_CONCAT_UNQUOTED',\n\t\t'LAST',\n\t\t'MAX',\n\t\t'MIN',\n\t\t'NEST',\n\t\t'NTH',\n\t\t'QUANTILES',\n\t\t'STDDEV',\n\t\t'STDDEV_POP',\n\t\t'STDDEV_SAMP',\n\t\t'SUM',\n\t\t'TOP',\n\t\t'UNIQUE',\n\t\t'VARIANCE',\n\t\t'VAR_POP',\n\t\t'VAR_SAMP',\n\t],\n\tlegacyBitwise: ['BIT_COUNT'],\n\tlegacyCasting: ['BOOLEAN', 'BYTES', 'CAST', 'FLOAT', 'HEX_STRING', 'INTEGER', 'STRING'],\n\tlegacyComparison: [\n\t\t// expr 'IN',\n\t\t'COALESCE',\n\t\t'GREATEST',\n\t\t'IFNULL',\n\t\t'IS_INF',\n\t\t'IS_NAN',\n\t\t'IS_EXPLICITLY_DEFINED',\n\t\t'LEAST',\n\t\t'NVL',\n\t],\n\tlegacyDatetime: [\n\t\t'CURRENT_DATE',\n\t\t'CURRENT_TIME',\n\t\t'CURRENT_TIMESTAMP',\n\t\t'DATE',\n\t\t'DATE_ADD',\n\t\t'DATEDIFF',\n\t\t'DAY',\n\t\t'DAYOFWEEK',\n\t\t'DAYOFYEAR',\n\t\t'FORMAT_UTC_USEC',\n\t\t'HOUR',\n\t\t'MINUTE',\n\t\t'MONTH',\n\t\t'MSEC_TO_TIMESTAMP',\n\t\t'NOW',\n\t\t'PARSE_UTC_USEC',\n\t\t'QUARTER',\n\t\t'SEC_TO_TIMESTAMP',\n\t\t'SECOND',\n\t\t'STRFTIME_UTC_USEC',\n\t\t'TIME',\n\t\t'TIMESTAMP',\n\t\t'TIMESTAMP_TO_MSEC',\n\t\t'TIMESTAMP_TO_SEC',\n\t\t'TIMESTAMP_TO_USEC',\n\t\t'USEC_TO_TIMESTAMP',\n\t\t'UTC_USEC_TO_DAY',\n\t\t'UTC_USEC_TO_HOUR',\n\t\t'UTC_USEC_TO_MONTH',\n\t\t'UTC_USEC_TO_WEEK',\n\t\t'UTC_USEC_TO_YEAR',\n\t\t'WEEK',\n\t\t'YEAR',\n\t],\n\tlegacyIp: ['FORMAT_IP', 'PARSE_IP', 'FORMAT_PACKED_IP', 'PARSE_PACKED_IP'],\n\tlegacyJson: ['JSON_EXTRACT', 'JSON_EXTRACT_SCALAR'],\n\tlegacyMath: [\n\t\t'ABS',\n\t\t'ACOS',\n\t\t'ACOSH',\n\t\t'ASIN',\n\t\t'ASINH',\n\t\t'ATAN',\n\t\t'ATANH',\n\t\t'ATAN2',\n\t\t'CEIL',\n\t\t'COS',\n\t\t'COSH',\n\t\t'DEGREES',\n\t\t'EXP',\n\t\t'FLOOR',\n\t\t'LN',\n\t\t'LOG',\n\t\t'LOG2',\n\t\t'LOG10',\n\t\t'PI',\n\t\t'POW',\n\t\t'RADIANS',\n\t\t'RAND',\n\t\t'ROUND',\n\t\t'SIN',\n\t\t'SINH',\n\t\t'SQRT',\n\t\t'TAN',\n\t\t'TANH',\n\t],\n\tlegacyRegex: ['REGEXP_MATCH', 'REGEXP_EXTRACT', 'REGEXP_REPLACE'],\n\tlegacyString: [\n\t\t'CONCAT',\n\t\t// expr CONTAINS 'str'\n\t\t'INSTR',\n\t\t'LEFT',\n\t\t'LENGTH',\n\t\t'LOWER',\n\t\t'LPAD',\n\t\t'LTRIM',\n\t\t'REPLACE',\n\t\t'RIGHT',\n\t\t'RPAD',\n\t\t'RTRIM',\n\t\t'SPLIT',\n\t\t'SUBSTR',\n\t\t'UPPER',\n\t],\n\tlegacyTableWildcard: ['TABLE_DATE_RANGE', 'TABLE_DATE_RANGE_STRICT', 'TABLE_QUERY'],\n\tlegacyUrl: ['HOST', 'DOMAIN', 'TLD'],\n\tlegacyWindow: [\n\t\t'AVG',\n\t\t'COUNT',\n\t\t'MAX',\n\t\t'MIN',\n\t\t'STDDEV',\n\t\t'SUM',\n\t\t'CUME_DIST',\n\t\t'DENSE_RANK',\n\t\t'FIRST_VALUE',\n\t\t'LAG',\n\t\t'LAST_VALUE',\n\t\t'LEAD',\n\t\t'NTH_VALUE',\n\t\t'NTILE',\n\t\t'PERCENT_RANK',\n\t\t'PERCENTILE_CONT',\n\t\t'PERCENTILE_DISC',\n\t\t'RANK',\n\t\t'RATIO_TO_REPORT',\n\t\t'ROW_NUMBER',\n\t],\n\tlegacyMisc: [\n\t\t'CURRENT_USER',\n\t\t'EVERY',\n\t\t'FROM_BASE64',\n\t\t'HASH',\n\t\t'FARM_FINGERPRINT',\n\t\t'IF',\n\t\t'POSITION',\n\t\t'SHA1',\n\t\t'SOME',\n\t\t'TO_BASE64',\n\t],\n\tother: ['BQ.JOBS.CANCEL', 'BQ.REFRESH_MATERIALIZED_VIEW'],\n};\n\n/**\n * Priority 5 (last)\n * Full list of reserved words\n * any words that are in a higher priority are removed\n */\nconst reservedKeywords = {\n\tkeywords: [\n\t\t'ALL',\n\t\t// 'AND',\n\t\t'ANY',\n\t\t// 'ARRAY',\n\t\t'AS',\n\t\t'ASC',\n\t\t'ASSERT_ROWS_MODIFIED',\n\t\t'AT',\n\t\t'BETWEEN',\n\t\t'BY',\n\t\t// 'CASE',\n\t\t'CAST',\n\t\t'COLLATE',\n\t\t'CONTAINS',\n\t\t// 'CREATE',\n\t\t// 'CROSS',\n\t\t'CUBE',\n\t\t'CURRENT',\n\t\t'DEFAULT',\n\t\t'DEFINE',\n\t\t'DESC',\n\t\t'DISTINCT',\n\t\t// 'ELSE',\n\t\t// 'END',\n\t\t'ENUM',\n\t\t'ESCAPE',\n\t\t// 'EXCEPT',\n\t\t// 'EXCLUDE',\n\t\t'EXISTS',\n\t\t'EXTRACT',\n\t\t'FALSE',\n\t\t// 'FETCH',\n\t\t'FOLLOWING',\n\t\t'FOR',\n\t\t// 'FROM',\n\t\t'FULL',\n\t\t// 'GROUP',\n\t\t'GROUPING',\n\t\t'GROUPS',\n\t\t'HASH',\n\t\t// 'HAVING',\n\t\t'IF',\n\t\t'IGNORE',\n\t\t'IN',\n\t\t// 'INNER',\n\t\t// 'INTERSECT',\n\t\t// 'INTERVAL',\n\t\t'INTO',\n\t\t'IS',\n\t\t// 'JOIN',\n\t\t// 'LATERAL',\n\t\t// 'LEFT',\n\t\t'LIKE',\n\t\t// 'LIMIT',\n\t\t'LOOKUP',\n\t\t// 'MERGE',\n\t\t// 'NATURAL',\n\t\t'NEW',\n\t\t'NO',\n\t\t'NOT',\n\t\t'NULL',\n\t\t'NULLS',\n\t\t'OF',\n\t\t// 'ON',\n\t\t// 'OR',\n\t\t// 'ORDER',\n\t\t// 'OUTER',\n\t\t'OVER',\n\t\t'PARTITION',\n\t\t'PRECEDING',\n\t\t'PROTO',\n\t\t'RANGE',\n\t\t'RECURSIVE',\n\t\t'RESPECT',\n\t\t// 'RIGHT',\n\t\t'ROLLUP',\n\t\t'ROWS',\n\t\t// 'SELECT',\n\t\t// 'SET',\n\t\t'SOME',\n\t\t// 'STRUCT',\n\t\t'TABLE',\n\t\t// 'TABLESAMPLE',\n\t\t// 'THEN',\n\t\t'TO',\n\t\t'TREAT',\n\t\t'TRUE',\n\t\t'UNBOUNDED',\n\t\t// 'UNION',\n\t\t// 'UNNEST',\n\t\t// 'USING',\n\t\t// 'WHEN',\n\t\t// 'WHERE',\n\t\t// 'WINDOW',\n\t\t// 'WITH',\n\t\t'WITHIN',\n\t],\n\tdatatypes: [\n\t\t'ARRAY', // parametric, ARRAY<T>\n\t\t'BOOL',\n\t\t'BYTES', // parameterised, BYTES(Length)\n\t\t'DATE',\n\t\t'DATETIME',\n\t\t'GEOGRAPHY',\n\t\t'INTERVAL',\n\t\t'INT64',\n\t\t'INT',\n\t\t'SMALLINT',\n\t\t'INTEGER',\n\t\t'BIGINT',\n\t\t'TINYINT',\n\t\t'BYTEINT',\n\t\t'NUMERIC', // parameterised, NUMERIC(Precision[, Scale])\n\t\t'DECIMAL', // parameterised, DECIMAL(Precision[, Scale])\n\t\t'BIGNUMERIC', // parameterised, BIGNUMERIC(Precision[, Scale])\n\t\t'BIGDECIMAL', // parameterised, BIGDECIMAL(Precision[, Scale])\n\t\t'FLOAT64',\n\t\t'STRING', // parameterised, STRING(Length)\n\t\t'STRUCT', // parametric, STRUCT<T>\n\t\t'TIME',\n\t\t'TIMEZONE',\n\t],\n\t// https://cloud.google.com/bigquery/docs/reference/standard-sql/conversion_functions#formatting_syntax\n\tstringFormat: ['HEX', 'BASEX', 'BASE64M', 'ASCII', 'UTF-8', 'UTF8'],\n\tmisc: ['SAFE'],\n};\n\n/**\n * Priority 1 (first)\n * keywords that begin a new statement\n * will begin new indented block\n */\nconst reservedCommands = [\n\t// DQL, https://cloud.google.com/bigquery/docs/reference/standard-sql/query-syntax\n\t'SELECT',\n\t'FROM',\n\t'UNNEST',\n\t'PIVOT',\n\t'UNPIVOT',\n\t'TABLESAMPLE SYSTEM',\n\t'WHERE',\n\t'GROUP BY',\n\t'HAVING',\n\t'ORDER BY',\n\t'QUALIFY',\n\t'WINDOW',\n\t'LIMIT',\n\t'OFFSET',\n\t'WITH',\n\t'OMIT RECORD IF', // legacy\n\t// DML, https://cloud.google.com/bigquery/docs/reference/standard-sql/dml-syntax\n\t'INSERT',\n\t'INSERT INTO',\n\t'VALUES',\n\t'DELETE',\n\t// 'DELETE FROM',\n\t'TRUNCATE TABLE',\n\t'UPDATE',\n\t'MERGE',\n\t'MERGE INTO',\n\t// 'USING',\n\t// DDL, https://cloud.google.com/bigquery/docs/reference/standard-sql/data-definition-language\n\t'SET SCHEMA', // added\n\t'CREATE SCHEMA',\n\t'CREATE TABLE',\n\t'CREATE TABLE LIKE',\n\t'CREATE TABLE COPY',\n\t'CREATE SNAPSHOT TABLE',\n\t'CREATE TABLE CLONE',\n\t'CREATE VIEW',\n\t'CREATE MATERIALIZED VIEW',\n\t'CREATE EXTERNAL TABLE',\n\t'CREATE FUNCTION',\n\t'CREATE TABLE FUNCTION',\n\t'CREATE PROCEDURE',\n\t'CREATE ROW ACCESS POLICY',\n\t'ALTER SCHEMA SET OPTIONS',\n\t'ALTER TABLE SET OPTIONS',\n\t'ALTER TABLE ADD COLUMN',\n\t'ALTER TABLE RENAME TO',\n\t'ALTER TABLE DROP COLUMN',\n\t'ALTER COLUMN SET OPTIONS',\n\t'ALTER COLUMN DROP NOT NULL',\n\t'ALTER COLUMN SET DATA TYPE',\n\t'ALTER VIEW SET OPTIONS',\n\t'ALTER MATERIALIZED VIEW SET OPTIONS',\n\t'DROP SCHEMA',\n\t'DROP TABLE',\n\t'DROP SNAPSHOT TABLE',\n\t'DROP EXTERNAL TABLE',\n\t'DROP VIEW',\n\t'DROP MATERIALIZED VIEW',\n\t'DROP FUNCTION',\n\t'DROP TABLE FUNCTION',\n\t'DROP PROCEDURE',\n\t'DROP ROW ACCESS POLICY',\n\t// DCL, https://cloud.google.com/bigquery/docs/reference/standard-sql/data-control-language\n\t'GRANT',\n\t'REVOKE',\n\t'CREATE CAPACITY',\n\t'CREATE RESERVATION',\n\t'CREATE ASSIGNMENT',\n\t'DROP CAPACITY',\n\t'DROP RESERVATION',\n\t'DROP ASSIGNMENT',\n\t// Script, https://cloud.google.com/bigquery/docs/reference/standard-sql/scripting\n\t'DECLARE',\n\t'SET',\n\t'EXECUTE IMMEDIATE',\n\t'LOOP',\n\t'END LOOP',\n\t'REPEAT',\n\t'END REPEAT',\n\t'WHILE',\n\t'END WHILE',\n\t'BREAK',\n\t'LEAVE',\n\t'CONTINUE',\n\t'ITERATE',\n\t'FOR',\n\t'END FOR',\n\t'BEGIN',\n\t'BEGIN TRANSACTION',\n\t'COMMIT TRANSACTION',\n\t'ROLLBACK TRANSACTION',\n\t'RAISE',\n\t'RETURN',\n\t'CALL',\n\t// Debug, https://cloud.google.com/bigquery/docs/reference/standard-sql/debugging-statements\n\t'ASSERT',\n\t// Other, https://cloud.google.com/bigquery/docs/reference/standard-sql/other-statements\n\t'EXPORT DATA',\n];\n\n/**\n * Priority 2\n * commands that operate on two tables or subqueries\n * two main categories: joins and boolean set operators\n */\nconst reservedBinaryCommands = [\n\t// set booleans\n\t'INTERSECT',\n\t'INTERSECT ALL',\n\t'INTERSECT DISTINCT',\n\t'UNION',\n\t'UNION ALL',\n\t'UNION DISTINCT',\n\t'EXCEPT',\n\t'EXCEPT ALL',\n\t'EXCEPT DISTINCT',\n\t// joins\n\t'JOIN',\n\t'INNER JOIN',\n\t'LEFT JOIN',\n\t'LEFT OUTER JOIN',\n\t'RIGHT JOIN',\n\t'RIGHT OUTER JOIN',\n\t'FULL JOIN',\n\t'FULL OUTER JOIN',\n\t'CROSS JOIN',\n];\n\n/**\n * Priority 3\n * keywords that follow a previous Statement, must be attached to subsequent data\n * can be fully inline or on newline with optional indent\n */\nconst reservedDependentClauses = ['ON', 'WHEN', 'THEN', 'ELSE', 'USING'];\n\n// https://cloud.google.com/bigquery/docs/reference/#standard-sql-reference\nexport default class BigQueryFormatter extends Formatter {\n\tstatic reservedCommands = reservedCommands;\n\tstatic reservedBinaryCommands = reservedBinaryCommands;\n\tstatic reservedDependentClauses = reservedDependentClauses;\n\tstatic reservedLogicalOperators = ['AND', 'OR'];\n\tstatic fullReservedWords = dedupe([\n\t\t...Object.values(reservedFunctions).reduce((acc, arr) => [...acc, ...arr], []),\n\t\t...Object.values(reservedKeywords).reduce((acc, arr) => [...acc, ...arr], []),\n\t]);\n\n\tstatic stringTypes: StringPatternType[] = ['\"\"', \"''\", '``']; // add: '''''', \"\"\"\"\"\" ; prefixes: r, b\n\tstatic blockStart = ['(', 'CASE'];\n\tstatic blockEnd = [')', 'END'];\n\tstatic indexedPlaceholderTypes = ['?'];\n\tstatic namedPlaceholderTypes = [];\n\tstatic lineCommentTypes = ['--', '#'];\n\tstatic specialWordChars = { any: '_@$-' };\n\tstatic operators = ['>>', '<<', '||'];\n\t// TODO: handle trailing comma in select clause\n\n\ttokenizer() {\n\t\treturn new Tokenizer({\n\t\t\treservedCommands: BigQueryFormatter.reservedCommands,\n\t\t\treservedBinaryCommands: BigQueryFormatter.reservedBinaryCommands,\n\t\t\treservedDependentClauses: BigQueryFormatter.reservedDependentClauses,\n\t\t\treservedLogicalOperators: BigQueryFormatter.reservedLogicalOperators,\n\t\t\treservedKeywords: BigQueryFormatter.fullReservedWords,\n\t\t\tstringTypes: BigQueryFormatter.stringTypes,\n\t\t\tblockStart: BigQueryFormatter.blockStart,\n\t\t\tblockEnd: BigQueryFormatter.blockEnd,\n\t\t\tindexedPlaceholderTypes: BigQueryFormatter.indexedPlaceholderTypes,\n\t\t\tnamedPlaceholderTypes: BigQueryFormatter.namedPlaceholderTypes,\n\t\t\tlineCommentTypes: BigQueryFormatter.lineCommentTypes,\n\t\t\tspecialWordChars: BigQueryFormatter.specialWordChars,\n\t\t\toperators: BigQueryFormatter.operators,\n\t\t});\n\t}\n\n\ttokenOverride(token: Token) {\n\t\tif (\n\t\t\t(/ARRAY/i.test(token.value) || /STRUCT/i.test(token.value)) &&\n\t\t\tthis.tokenLookAhead().value === '<'\n\t\t) {\n\t\t\tlet level = 0;\n\t\t\tlet finalToken = token.value;\n\n\t\t\tdo {\n\t\t\t\tconst nextToken = this.tokenLookAhead();\n\t\t\t\tif (nextToken.value === '>' || nextToken.value === '>>') {\n\t\t\t\t\tlevel -= nextToken.value.length;\n\t\t\t\t} else if (nextToken.value === '<') {\n\t\t\t\t\tlevel++;\n\t\t\t\t}\n\t\t\t\tfinalToken += this.tokens.splice(this.index + 1, 1)[0].value;\n\t\t\t} while (level > 0);\n\n\t\t\treturn { ...token, value: finalToken };\n\t\t}\n\n\t\treturn token;\n\t}\n}\n"],"file":"bigquery.formatter.js"}